<div id="card-wrapper">
    <img id="key-card" class="hidden">
    <div id="card-text" class="hidden"></div>
</div>

<style>
    #card-wrapper {
        position: fixed; top: 50%; left: 50%;
        transform: translate(-50%, -50%);
        display: flex; flex-direction: column; align-items: center;
    }

    /* テキストボックスのデザイン */
    #card-text {
        margin-top: 20px;
        padding: 15px 30px;
        background: rgba(0, 0, 0, 0.8);
        color: white;
        font-size: 24px;
        font-weight: bold;
        border-left: 5px solid #007bff;
        border-radius: 5px;
        min-width: 300px;
        max-width: 600px;
        opacity: 0;
        transition: all 0.5s ease;
    }

    /* 表示時のアニメーション */
    #card-text.show { opacity: 1; }
</style>

<script>
    // JSの受信部分を修正
    conn.on('data', (data) => {
        const textEl = document.getElementById('card-text');
        if (data.action === 'show') {
            // 画像の表示
            cardImg.src = data.url;
            cardImg.classList.add('show');
            
            // テキストの表示
            if (data.text) {
                textEl.innerText = data.text;
                textEl.classList.remove('hidden');
                setTimeout(() => textEl.classList.add('show'), 200);
            }
        } else {
            cardImg.classList.remove('show');
            textEl.classList.remove('show');
        }
    });
</script>
